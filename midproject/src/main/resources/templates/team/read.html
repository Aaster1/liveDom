<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{/UI/user/layout/main_layout}"
      >
<head>
    <title>공연팀 모집 조회</title>
</head>
<body layout:fragment="content">
    <h1>공연팀 모집</h1>

    <h2 th:text="${team.title}"></h2>

    <table>
        <tr>
            <td>조회수</td>
            <td th:text="${team.views}"></td>
          </tr>
        <tr>
            <td>갱신일자</td>
            <td th:text="${#dates.format(team.updDate,'yyyy-MM-dd HH:mm:ss')}"></td>
          </tr>
        <tr>
            <td>모집 팀 수</td>
            <td th:text="${team.capacity}+'팀'"></td>
        </tr>
        <tr>
            <td>공연일자</td>
            <td th:text="${team.liveDate}"></td>
        </tr>
        <tr>
            <td>공연시간</td>
            <td th:text="${team.liveStTime}+' ~ '+${team.liveEndTime}"></td>
        </tr>
        <tr>
            <td>지역</td>
            <td th:text="${team.location}"></td>
        </tr>
        <tr>
            <td>장소</td>
            <td th:text="${team.address}"></td>
        </tr>
        <tr>
            <td>팀 모집 현황</td>
            <td th:text="${team.recStatus} +'/'+${team.capacity}"></td>
        </tr>
    </table>

    <div>
        <button type="button" onclick="moveList()">목록</button>
        <button type="button" th:onclick=" 'moveApplication('+${team.teamNo}+')' ">신청</button>

        <th:block sec:authorize="isAuthenticated()" th:if="${team.username eq #authentication.principal.username}">

        <a th:href="|/team/update?teamNo=${team.teamNo}|">수정</a>


            <form action="/team/delete" method="POST">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
            <input type="hidden" name="teamNo" th:value="${team.teamNo}">
            <input type="hidden" name="recStatus" th:value="${team.recStatus}">
            <input type="submit" value="삭제">

        </form>

      </th:block>
    </div>

    <div style="background-color: darkgrey; width: 500px; height: 800px;">
        <p th:utext="${team.content}">

        </p>
    </div>
    
    <script>
        // 목록으로 이동
        function moveList() {
            location.href = "/team"
        }

        // 신청으로 이동
        function moveApplication(teamNo) {
            location.href = `/team/app?teamNo=${teamNo}`
        }

    </script>
</body>
</html>